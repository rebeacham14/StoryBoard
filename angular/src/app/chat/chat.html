<div class="chat-container" [class.hidden-chat]="!chatVisible">

    @if(chatVisible) {
    <div>
        @if(!notepadView) {
        <div class="scroll-container" [class.hidden-scroll]="!messagesVisible">
            @for (message of allMessages; track message._id) {
            <div class="user-message">
                {{ message.userContent }}
            </div>
            <div class="ai-message">
                {{  message.aiContent  }}
            </div>
            }
        </div>

        <div>
            <button class="hide-messages-button" (click)="toggleMessagesView()">
                {{ messagesVisible ? 'Hide' : 'Show' }}
            </button>
        </div>

        <div class="hint-message">
            Tell me about the story idea you have.
            <br/>
            It can be anything from information about a character, to the design of an important landmark in the world!
        </div>
        <div class="input-container">
            
            <!-- <label for="section">Choose a level:</label> -->
            <select id="section-select" name="section" >
                <option value="HOME" default>-- -- </option>
                <option value="LORE">Lore</option>
                <option value="GAMEPLAY">Gameplay</option>
                <option value="NOVEL">Novel</option>
                <option value="SCREENPLAY">Screenplay</option>
                <option value="TIMELINE">Timeline</option>
            </select>


            <input id="userInput" type="text" #userInput id="userInput" placeholder="Adventure, Horror, Fantasy??">
            <button id="sendButton" class="sendButton" (click)="onSend(userInput.value)" [disabled]="isLoading" [class.loading-btn]="isLoading">
                {{isLoading ? ' ' : 'Send'}}
            </button>
        </div>

        <button class="update-button" (click)="updateChat()">
            Load / Update
        </button>

        <button class="make-dash-text-btn" (click)="makeDashText()" [class.disabled-btn]="!canMakeDashText">
            Make Dashboard Text
        </button>

        }
        @if(notepadView) {
        <div class="note-pad-container">
            <textarea class="note-pad-textarea" #notePadTextarea type="text" placeholder="Enter your notes here..."> </textarea>
            <!-- 
            <button class="save-note-button" (click)="saveNotePadData(notePadTextarea.value)">
                Save Notes
            </button>  
            -->
        </div>
        }

        <!-- 
        <button class="note-pad-button" (click)="toggleNotePad()">
            {{ notepadView ? 'Chat View' : 'Notes View' }}
        </button> 
        -->

    </div>
    }
    
    <button class="hide-button" (click)="hideChat()">
        {{ chatVisible ? 'Hide' : 'Show' }}
    </button>


</div>
